(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{65:function(s,a,t){"use strict";t.r(a);var e=t(0),r=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"ssh常用操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh常用操作","aria-hidden":"true"}},[s._v("#")]),s._v(" SSH常用操作")]),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#生成"}},[s._v("生成")])]),t("li",[t("a",{attrs:{href:"#使用"}},[s._v("使用")])]),t("li",[t("a",{attrs:{href:"#在git中使用"}},[s._v("在GIT中使用")])]),t("li",[t("a",{attrs:{href:"#在服务器上使用"}},[s._v("在服务器上使用")])]),t("li",[t("a",{attrs:{href:"#测试"}},[s._v("测试")])]),t("li",[t("a",{attrs:{href:"#常见问题"}},[s._v("常见问题")])])])]),t("p"),t("h2",{attrs:{id:"生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成","aria-hidden":"true"}},[s._v("#")]),s._v(" 生成")]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ssh-keygen -t rsa -C "),t("span",{attrs:{class:"token string"}},[s._v('"zhangjunbin@wanda.cn"')]),s._v("\n")])]),t("h2",{attrs:{id:"使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用")]),t("p",[s._v("将公钥添加到会话中去")]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ssh-add "),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("file-path:这里是公钥"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),t("h2",{attrs:{id:"在git中使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在git中使用","aria-hidden":"true"}},[s._v("#")]),s._v(" 在GIT中使用")]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ssh-add ~/.ssh/xxxxxxxx\npbcopy "),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v(" ~/.ssh/xxxxxxxx.pub\n")])]),t("p",[s._v("复制到git的setting中的sshkeys中添加即可")]),t("h2",{attrs:{id:"在服务器上使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在服务器上使用","aria-hidden":"true"}},[s._v("#")]),s._v(" 在服务器上使用")]),t("ol",[t("li",[s._v("将本地生成的key的公钥复制到目标服务器中")])]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("scp")]),s._v(" ~/.ssh/KEY.pub user@"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("targetServer"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":~/.ssh/\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("登录目标服务器,然后将公钥的内容写入到authorized_keys中")])]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.ssh/KEY.pub "),t("span",{attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.ssh/authorized_keys\n")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("然后将KEY写入到会话中")])]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ssh-add ~/.ssh/KEY\n")])]),t("p",[s._v("就可以实现免密码登录了")]),t("h2",{attrs:{id:"测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试","aria-hidden":"true"}},[s._v("#")]),s._v(" 测试")]),t("p",[s._v("ssh -T git@github.xxx.net\n成功会提示用户名")]),t("h2",{attrs:{id:"常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见问题","aria-hidden":"true"}},[s._v("#")]),s._v(" 常见问题")]),t("ol",[t("li",[t("p",[s._v("失效问题")]),t("p",[t("code",[s._v("ssh-add")]),s._v("只是将密钥添加到会话中.仅本次"),t("strong",[s._v("会话有效")]),s._v(","),t("strong",[s._v("重启失效")]),s._v("\n所以经常会遇到permission denied (publick key)的问题\n原因是因为重启之后会话中已经添加的密钥被清空\n需要重新执行"),t("code",[s._v("ssh-add")])]),t("p",[s._v("当然这个有解决办法:\n"),t("strong",[s._v("添加.ssh/config文件")])]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Host github.xxx.net\nUser zhangjunbin\nHostname github.xxx.net\nIdentityFile ~/.ssh/id_rsa\n")])]),t("p",[s._v("添加完了之后 访问指定域名时将会优先使用指定的密钥")]),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),t("p",[s._v("每次访问最多重试6次ssh-key,如果添加的太多并且靠后,在失败6次之后任没遇到正确的,则依然会失败")])])]),t("li",[t("p",[s._v("指纹对比")]),t("p",[s._v("最新的SSH 命令将finger print 以SHA256的形式列出")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh-keygen -l -v  -f  ~/.ssh/xxx\n4096 SHA256:CF+LL0hN5SVbrMyGg5yjjWFkwumGU9qSCv3MlKdGdbo zhangjunbin@wanda.cn (RSA)\n")])]),t("p",[s._v("而git上的ssh-key的指纹是MD5,所以当遇到自己忘了添加的是哪个key的时候可以通过计算本地的key的MD5来做比较")]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ssh-keygen -E md5 -lf ~/.ssh/id_rsa.pub\n2048 MD5:b7:92:03:03:9d:b5:43:c5:dc:98:14:4e:3b:65:3a:d8 zhangjunbin@wanda.cn "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RSA"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])])}],!1,null,null,null);a.default=r.exports}}]);